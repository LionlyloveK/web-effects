<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>150.SVG拟物态圆环进度条</title>
  </head>
  <link rel="stylesheet" href="../common.css" />
  <style>
    :root {
      --ring-color1: #c1dfc4;
      --ring-color2: #3cba92;
      --white: #ffffff;
      --greyLight-1: #ebf5fc;
      --greyLight-2: #d5e0f3;
      --greyDark: #646b8c;
    }

    html {
      font-size: 62.5%;
      -webkit-font-smoothing: antialiased;
    }

    body {
      background: var(--greyLight-2);
    }

    .card {
      width: 300px;
      padding: 20px;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      border-radius: 20px;
      background: var(--greyLight-1);
      box-shadow: 0px 20px 30px rgba(100, 131, 177, 0.2);
      border: 1px solid white;
    }
    .card__percent {
      position: relative;
      display: flex;
      justify-content: center;
      align-items: center;
    }
    .card__number {
      position: absolute;
      color: var(--greyDark);
      font-size: 3.6rem;
      font-family: "DM Sans", sans-serif;
    }

    svg {
      position: relative;
      width: 150px;
      height: 150px;
      z-index: 1;
      transform: rotate(-90deg);
      border: 1px solid red;
    }

    svg circle {
      width: 100%;
      height: 100%;
      fill: none;
      stroke-linecap: round;
      transform: translate(15px, 15px);
      stroke-dasharray: 565.49;
      stroke-dashoffset: 565.49;
      /* 282.75对应50% */
      transition: all 1s ease;
      stroke-width: 10;
    }

    .circle {
      position: absolute;
      width: 150px;
      height: 150px;
      border-radius: 50%;
      box-shadow: 6px 6px 8px var(--greyLight-2), -6px -6px 8px var(--white);
      background: var(--greyLight-1);
    }
    .circle__medium {
      width: 130px;
      height: 130px;
      box-shadow: inset 8px 8px 10px var(--greyLight-2),
        inset -4px -4px 8px var(--white);
    }
    .circle__small {
      width: 110px;
      height: 110px;
      box-shadow: 6px 6px 8px var(--greyLight-2), -2px -2px 8px var(--white);
    }
  </style>
  <body>
    <div class="container">
      <div class="card">
        <div class="card__percent">
          <svg>
            <defs>
              <radialGradient
                id="gradient"
                cx="50%"
                cy="50%"
                r="60%"
                fx="50%"
                fy="50%"
              >
                <stop offset="30%" stop-color="var(--ring-color2)" />
                <stop offset="100%" stop-color="var(--ring-color1)" />
              </radialGradient>
            </defs>
            <circle
              cx="60"
              cy="60"
              r="60"
              stroke="url(#gradient)"
              id="circle"
            ></circle>
          </svg>
          <div class="circle"></div>
          <div class="circle circle__medium"></div>
          <div class="circle circle__small"></div>
          <div class="card__number">--</div>
        </div>
      </div>
    </div>
  </body>
  <script>
    const getData = () => {
      const circle = document.getElementById("circle");
      const number = document.querySelector(".card__number");

      function circlePercent(e) {
        let change = 565.49 - (565.49 * e) / 100;
        circle.style.strokeDashoffset = change;
      }
      let i = 0;
      let timer = null;
      const loading = () => {
        if (i < 100) {
          i++;
          number.innerHTML = i + "%";
          circlePercent(i);
        } else {
          clearInterval(timer);
        }
      };
      loading();
      timer = setInterval(loading, 100);
    };
    getData();
  </script>
</html>
