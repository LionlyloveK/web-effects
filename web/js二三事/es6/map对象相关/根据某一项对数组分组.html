<!--
 * @Author: 胡苏珍 1628469970@qq.com
 * @Date: 2022-08-03 13:54:51
 * @LastEditors: 胡苏珍 1628469970@qq.com
 * @LastEditTime: 2022-09-09 17:58:20
 * @FilePath: \css_demos\web\js二三事\es6\map对象相关\根据某一项对数组分组.html
 * @Description: 这是默认设置,请设置`customMade`, 打开koroFileHeader查看配置 进行设置: https://github.com/OBKoro1/koro1FileHeader/wiki/%E9%85%8D%E7%BD%AE
-->
<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <title></title>
</head>

<body>
</body>
<script>
  var arr = [

    {
      id: 1,
      groupCode: '111',
      groupName: 'susu',
      name: 'test01'
    },
    {
      id: 2,
      groupCode: '111',
      groupName: 'susu',
      name: 'test02'
    },
    {
      id: 3,
      groupCode: '222',
      groupName: 'susu2',
      name: 'test03'
    },
    {
      id: 4,
      groupCode: '333',
      groupName: 'susu3',
      name: 'test04'
    },
    {
      id: 5,
      groupCode: '333',
      groupName: 'susu3',
      name: 'test05'
    },
    {
      id: 6,
      groupCode: '333',
      groupName: 'susu3',
      name: 'test06'
    },
  ];
  console.log(arr)
  // 普通对象处理
  function groupByKey(key, arr, key1) {
    let map = new {},
      resData = [];
    arr.map(item => {
      if (!map[item[key]]) {
        map[item[key]] = [item]
      } else {
        map[item[key]].push(item)
      }
    })
    Object.keys(map).forEach(i => {
      console.log(map, i)
      resData.push({
        [key]: i,
        [key1]: map[i][0][key1],
        list: map[i]
      })
    })
    return resData;
  }
  console.log(groupByKey('groupCode', arr, 'groupName'))
  // map处理
  function groupBy(array, f) {
    //初始化 Map, 用来存储键值对
    let map = new Map()

    array.forEach(function(obj) {
      //根据传入的函数，对数组中的每一个对象产生一个 key值，并将key值相等的对象分为一组
      let key = f(obj)
      map.set(key, (map.get(key) || []))
      map.get(key).push(obj)
    });
    return map
  }
</script>

</html>